# Чек-лист: Telegram-бот для напоминаний

## Группа 1: Инфраструктура и логика парсинга (Параллельно)

- [x] **1.1 Миграции базы данных (Liquibase)**
  - [x] Создать changelog `add_telegram_tables.xml`
  - [x] Добавить `telegram_id` в `member`
  - [x] Создать таблицу `pending_link`
  - [x] Создать таблицу `polling_state`
- [x] **1.2 Telegram REST Client & DTOs**
  - [x] Создать DTO (Update, Message, User, Chat, SendMessageRequest)
  - [x] Создать интерфейс `TelegramBotClient`
- [x] **1.3 Компонент парсинга сообщений**
  - [x] Реализовать `TelegramMessageParser` (поддержка `Ч:ММ`, `Xч Yм`, `Xh Ym`)
  - [x] Реализовать логику нормализации (маппинг `ч`/`м` -> `H`/`M`)
  - [x] Написать Unit-тесты для парсера

## Группа 2: Сущности и модели (После 1.1)

- [x] **2.1 Сущности Panache**
  - [x] Обновить `Member.java`
  - [x] Создать `PendingLink.java`
  - [x] Создать `PollingState.java`

## Группа 3: Бизнес-логика (После 1.2, 1.3, 2.1)

- [x] **3.1 Сервис привязки (TelegramLinkService)**
  - [x] Генерация уникального кода
  - [x] Логика подтверждения привязки
  - [x] Реализовать очистку устаревших кодов по расписанию
- [x] **3.2 Обработчик сообщений (TelegramMessageHandler)**
  - [x] Обработка команд `/start`, `/today`, `/help`
  - [x] Сохранение `TimeEntry` через сервис

## Группа 4: Интеграция и интерфейс (После 3.1, 3.2)

- [x] **4.1 Сервис опроса (TelegramPollingService)**
  - [x] Реализовать Polling через `@Scheduled`
  - [x] Управление `last_update_id`
- [x] **4.2 Сервис напоминаний (ReminderService)**
  - [x] Настроить cron-задачу
  - [x] Логика проверки заполнения времени и рассылки
- [ ] **4.3 Пользовательский интерфейс (React)**
  - [ ] Добавить секцию Telegram в UI
  - [ ] Интеграция с API для получения кода

## Группа 5: Стабилизация

- [ ] **5.1 Конфигурация и финальное тестирование**
  - [ ] Настройка `application.properties`
  - [ ] E2E тестирование
