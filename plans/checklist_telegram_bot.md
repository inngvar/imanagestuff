# Чек-лист: Telegram-бот для напоминаний

## Группа 1: Инфраструктура и логика парсинга (Параллельно)

- [x] **1.1 Миграции базы данных (Liquibase)**
  - [x] Создать changelog `add_telegram_tables.xml`
  - [x] Добавить `telegram_id` в `member`
  - [x] Создать таблицу `pending_link`
  - [x] Создать таблицу `polling_state`
- [x] **1.2 Telegram REST Client & DTOs**
  - [x] Создать DTO (Update, Message, User, Chat, SendMessageRequest)
  - [x] Создать интерфейс `TelegramBotClient`
- [ ] **1.3 Компонент парсинга сообщений**
  - [ ] Реализовать `TelegramMessageParser` (поддержка `Ч:ММ`, `Xч Yм`, `Xh Ym`)
  - [ ] Реализовать логику нормализации (маппинг `ч`/`м` -> `H`/`M`)
  - [ ] Написать Unit-тесты для парсера

## Группа 2: Сущности и модели (После 1.1)

- [ ] **2.1 Сущности Panache**
  - [ ] Обновить `Member.java`
  - [ ] Создать `PendingLink.java`
  - [ ] Создать `PollingState.java`

## Группа 3: Бизнес-логика (После 1.2, 1.3, 2.1)

- [ ] **3.1 Сервис привязки (TelegramLinkService)**
  - [ ] Генерация уникального кода
  - [ ] Логика подтверждения привязки
- [ ] **3.2 Обработчик сообщений (TelegramMessageHandler)**
  - [ ] Обработка команд `/start`, `/today`, `/help`
  - [ ] Сохранение `TimeEntry` через сервис

## Группа 4: Интеграция и интерфейс (После 3.1, 3.2)

- [ ] **4.1 Сервис опроса (TelegramPollingService)**
  - [ ] Реализовать Polling через `@Scheduled`
  - [ ] Управление `last_update_id`
- [ ] **4.2 Сервис напоминаний (ReminderService)**
  - [ ] Настроить cron-задачу
  - [ ] Логика проверки заполнения времени и рассылки
- [ ] **4.3 Пользовательский интерфейс (React)**
  - [ ] Добавить секцию Telegram в UI
  - [ ] Интеграция с API для получения кода

## Группа 5: Стабилизация

- [ ] **5.1 Конфигурация и финальное тестирование**
  - [ ] Настройка `application.properties`
  - [ ] E2E тестирование
